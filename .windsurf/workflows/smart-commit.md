---
description: 智能提交工作流 - 通过组合Git命令实现智能提交
auto_execution_mode: 1
---

# 智能提交工作流

这个工作流通过组合多个 `git_command` 调用来实现智能提交功能，替代单独的 `git_smart_commit` 工具。

## 工作流步骤

### 1. 检查工作区状态
首先检查当前工作区的状态，了解有哪些文件被修改：

```bash
git status --porcelain
```

### 2. 添加所有更改到暂存区
// turbo
将所有修改的文件添加到暂存区：

```bash
git add .
```

### 3. 验证暂存区内容
// turbo
检查暂存区中的文件，确保有内容可以提交：

```bash
git diff --cached --name-only
```

### 4. 执行提交
使用AI生成的提交信息执行提交：

```bash
git commit -m "[AI生成的提交信息]"
```

### 5. 推送到远程仓库
// turbo
尝试推送到远程仓库：

```bash
git push
```

### 6. 处理上游分支（如果需要）
如果推送失败因为没有设置上游分支，则设置上游分支并推送：

```bash
git branch --show-current
git push --set-upstream origin [当前分支名]
```

## 使用说明

1. **AI分析**: AI会分析工作区的更改，根据文件类型和修改内容生成合适的提交信息
2. **自动处理**: 工作流会自动处理文件添加、提交和推送
3. **错误处理**: 如果推送失败，会自动尝试设置上游分支
4. **状态反馈**: 每个步骤都会提供详细的状态反馈

## 优势

- **模块化**: 每个步骤都是独立的Git命令，易于理解和调试
- **灵活性**: 可以根据需要调整或跳过某些步骤
- **透明性**: 用户可以清楚看到每个执行的Git命令
- **安全性**: 利用现有的Git命令安全验证机制

## 注意事项

- 确保在正确的Git仓库目录中执行
- 提交前请确认要提交的文件内容
- 如果有冲突或其他问题，工作流会停止并提供错误信息